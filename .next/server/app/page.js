(()=>{var e={};e.id=974,e.ids=[974],e.modules={6330:e=>{"use strict";e.exports=require("@prisma/client")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},1244:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=r(260),o=r(8203),i=r(5155),a=r.n(i),l=r(7292),n={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);r.d(t,n);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6395)),"/Users/revdave/Sites/-WebApps/-NEXT-VARIED/ws-12/todo-app-pg/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1354)),"/Users/revdave/Sites/-WebApps/-NEXT-VARIED/ws-12/todo-app-pg/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/revdave/Sites/-WebApps/-NEXT-VARIED/ws-12/todo-app-pg/src/app/page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5853:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3219,23)),Promise.resolve().then(r.t.bind(r,4863,23)),Promise.resolve().then(r.t.bind(r,5155,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,6313,23)),Promise.resolve().then(r.t.bind(r,8530,23)),Promise.resolve().then(r.t.bind(r,8921,23))},7469:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6959,23)),Promise.resolve().then(r.t.bind(r,3875,23)),Promise.resolve().then(r.t.bind(r,8903,23)),Promise.resolve().then(r.t.bind(r,4178,23)),Promise.resolve().then(r.t.bind(r,6013,23)),Promise.resolve().then(r.t.bind(r,7190,23)),Promise.resolve().then(r.t.bind(r,1365,23))},8043:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,5197,23)),Promise.resolve().then(r.bind(r,2419)),Promise.resolve().then(r.bind(r,3023)),Promise.resolve().then(r.bind(r,3355)),Promise.resolve().then(r.bind(r,389)),Promise.resolve().then(r.bind(r,7349))},1187:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,7801,23)),Promise.resolve().then(r.bind(r,2007)),Promise.resolve().then(r.bind(r,3619)),Promise.resolve().then(r.bind(r,4287)),Promise.resolve().then(r.bind(r,7529)),Promise.resolve().then(r.bind(r,5564))},5960:()=>{},2808:()=>{},2007:(e,t,r)=>{"use strict";r.d(t,{CategoryFilter:()=>a});var s=r(5512),o=r(9334);let i=e=>{switch(e){case"Event":return"bg-purple-100 text-purple-800 hover:bg-purple-200";case"Reminder":return"bg-blue-100 text-blue-800 hover:bg-blue-200";case"Someday":return"bg-green-100 text-green-800 hover:bg-green-200";case"Now":return"bg-orange-100 text-orange-800 hover:bg-orange-200";default:return"bg-gray-100 text-gray-800 hover:bg-gray-200"}};function a({selectedCategory:e}){let t=(0,o.useRouter)(),r=(0,o.useSearchParams)(),a=e=>{let s=r.get("priority")||"All";"All"===e?"All"===s?t.push("/"):t.push(`/?priority=${s}`):t.push(`/?category=${e}${"All"!==s?`&priority=${s}`:""}`)};return(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:["All","Event","Reminder","Someday","Now"].map(t=>(0,s.jsx)("button",{onClick:()=>a(t),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors duration-200 ${i(t)} ${e===t?"ring-2 ring-offset-2 ring-blue-500":""}`,children:t},t))})}},3619:(e,t,r)=>{"use strict";r.d(t,{PriorityFilter:()=>i});var s=r(5512),o=r(9334);function i({selectedPriority:e}){let t=(0,o.useRouter)(),r=(0,o.useSearchParams)(),i=e=>{let s=r.get("category")||"All";"All"===e?"All"===s?t.push("/"):t.push(`/?category=${s}`):t.push(`/?priority=${e}${"All"!==s?`&category=${s}`:""}`)};return(0,s.jsx)("div",{className:"flex gap-2 mb-4",children:["All","High","Medium","Low"].map(t=>(0,s.jsx)("button",{onClick:()=>i(t),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors duration-200 ${e===t?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:t},t))})}},4287:(e,t,r)=>{"use strict";r.d(t,{SortFilter:()=>i});var s=r(5512),o=r(9334);function i({selectedSortField:e,selectedSortOrder:t}){let r=(0,o.useSearchParams)(),i=(e,t)=>{let s=new URLSearchParams(r.toString());return s.set("sortField",e),s.set("sortOrder",t),s.has("page")||s.set("page","1"),`?${s.toString()}`};return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:[{field:"createdAt",label:"Creation Date"},{field:"updatedAt",label:"Last Updated"},{field:"priority",label:"Priority"},{field:"status",label:"Status"}].map(r=>(0,s.jsxs)("button",{onClick:()=>{let s=e===r.field&&"desc"===t?"asc":"desc";window.location.href=i(r.field,s)},className:`px-3 py-1.5 text-sm rounded-md border transition-colors flex items-center gap-1 ${e===r.field?"bg-blue-500 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:[r.label,e===r.field&&(0,s.jsx)("span",{className:"text-xs",children:"desc"===t?"↓":"↑"})]},r.field))}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"Click a field to sort. Click again to reverse order."})]})}},7529:(e,t,r)=>{"use strict";r.d(t,{StatusFilter:()=>i});var s=r(5512),o=r(9334);function i({selectedStatus:e}){let t=(0,o.useRouter)(),r=(0,o.useSearchParams)(),i=e=>{let s=r.get("category")||"All",o=r.get("priority")||"All",i=new URLSearchParams;"All"!==s&&i.append("category",s),"All"!==o&&i.append("priority",o),"All"!==e&&i.append("status",e);let a=i.toString();t.push(a?`/?${a}`:"/")};return(0,s.jsx)("div",{className:"flex gap-2",children:["All","Active","Pending","Complete","OnHold"].map(t=>(0,s.jsx)("button",{onClick:()=>i(t),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors duration-200 ${e===t?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:t},t))})}},5564:(e,t,r)=>{"use strict";r.d(t,{TodoList:()=>d});var s=r(5512),o=r(8009);function i({content:e}){let[t,r]=(0,o.useState)(!1),i=e.includes("<")&&e.includes(">");return t?(0,s.jsx)("div",{className:"text-gray-800 [&_p]:mb-0 [&_span]:mb-0",dangerouslySetInnerHTML:{__html:e}}):i?(0,s.jsx)("div",{className:"text-gray-800",children:"Loading..."}):(0,s.jsx)("div",{className:"text-gray-800",children:e})}var a=r(6008),l=r(9334);function n(e){return new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}function d({todos:e,selectedCategory:t,selectedPriority:r,selectedStatus:d,currentPage:c,totalCount:p}){let u=(0,l.useRouter)(),[m,g]=(0,o.useState)(!1),[x,h]=(0,o.useState)(""),b=async e=>{if(window.confirm("Are you sure you want to delete this todo?")){g(!0),h("");try{if(!(await fetch(`/api/todos?id=${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete todo");u.refresh()}catch(e){h("Failed to delete todo. Please try again.")}finally{g(!1)}}};return e.length?(0,s.jsxs)("div",{className:"space-y-4",children:[x&&(0,s.jsx)("div",{className:"bg-red-100 text-red-700 p-4 rounded-md mb-4",children:x}),e.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(a.default,{href:`/view/${e.id}`,className:"text-xl font-semibold text-gray-900 hover:text-blue-600",children:e.title}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("span",{className:`px-2 py-1 text-sm rounded-full ${"Event"===e.category?"bg-purple-100 text-purple-800":"Reminder"===e.category?"bg-yellow-100 text-yellow-800":"Someday"===e.category?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:e.category}),(0,s.jsx)("span",{className:`px-2 py-1 text-sm rounded-full ${"High"===e.priority?"bg-red-100 text-red-800":"Medium"===e.priority?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"}`,children:e.priority}),(0,s.jsx)("span",{className:`px-2 py-1 text-sm rounded-full ${"Active"===e.status?"bg-blue-100 text-blue-800":"Pending"===e.status?"bg-yellow-100 text-yellow-800":"Complete"===e.status?"bg-green-100 text-green-800":"OnHold"===e.status?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:e.status})]})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(a.default,{href:`/edit/${e.id}`,className:"text-blue-500 hover:text-blue-700",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>b(e.id),disabled:m,className:"text-red-500 hover:text-red-700 disabled:opacity-50",children:"Delete"})]})]}),e.content&&(0,s.jsx)("div",{className:"mt-4 text-gray-600",children:(0,s.jsx)(i,{content:e.content})}),(0,s.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:[(0,s.jsxs)("div",{children:["Created: ",n(new Date(e.createdAt))]}),e.updatedAt&&e.updatedAt!==e.createdAt&&(0,s.jsxs)("div",{children:["Updated: ",n(new Date(e.updatedAt))]})]})]},e.id))]}):(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-gray-500",children:"No todos found"})})}},5197:(e,t,r)=>{let{createProxy:s}=r(3439);e.exports=s("/Users/revdave/Sites/-WebApps/-NEXT-VARIED/ws-12/todo-app-pg/node_modules/next/dist/client/link.js")},1354:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>o});var s=r(2740);r(1135);let o={title:"Todo App SQLite",description:"A simple todo app built with Next.js"};function i({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{children:e})})}},6395:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x,generateMetadata:()=>g});var s=r(2740),o=r(6330);let i=global.prisma||new o.PrismaClient({log:[]});var a=r(5197),l=r.n(a),n=r(7349),d=r(2419),c=r(3023),p=r(389),u=r(3355);function m({todos:e,totalCount:t,totalPages:r,currentPage:o,selectedCategory:i,selectedPriority:a,selectedStatus:m,sortField:g,sortOrder:x,searchParams:h}){return(0,s.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Todo List"}),(0,s.jsx)(l(),{href:"/add",className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md transition-colors",children:"Add Todo"})]}),(0,s.jsxs)("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"p-4 space-y-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,s.jsx)(d.CategoryFilter,{selectedCategory:i})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-sm font-medium text-gray-700 mb-2",children:"Priority"}),(0,s.jsx)(c.PriorityFilter,{selectedPriority:a})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,s.jsx)(p.StatusFilter,{selectedStatus:m})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),(0,s.jsx)(u.SortFilter,{selectedSortField:g,selectedSortOrder:x})]})]})}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(n.TodoList,{todos:e,selectedCategory:i,selectedPriority:a,selectedStatus:m,currentPage:o,totalCount:t})}),r>1&&(0,s.jsx)("div",{className:"flex justify-center space-x-2 p-4",children:Array.from({length:r},(e,t)=>t+1).map(e=>(0,s.jsx)(l(),{href:{pathname:"/",query:{...h,page:e.toString()}},className:`px-3 py-1 rounded-md ${o===e?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e},e))})]})]})}async function g(){return{title:"Todo App",description:"A simple todo app with advanced features"}}async function x({searchParams:e={}}){let t=e.category||"All",r=e.priority||"All",o=e.status||"All",a=Number(e.page)||1,l=e.sortField||"createdAt",n=e.sortOrder||"desc",d=await i.todo.count({where:{AND:["All"===t?{}:{category:t},"All"===r?{}:{priority:r},"All"===o?{}:{status:o}]}}),c=Math.ceil(d/3),p=await i.todo.findMany({where:{AND:["All"===t?{}:{category:t},"All"===r?{}:{priority:r},"All"===o?{}:{status:o}]},orderBy:{[l]:n},skip:(a-1)*3,take:3});return(0,s.jsx)(m,{todos:p,totalCount:d,totalPages:c,currentPage:a,selectedCategory:t,selectedPriority:r,selectedStatus:o,sortField:l,sortOrder:n,searchParams:e})}},2419:(e,t,r)=>{"use strict";r.d(t,{CategoryFilter:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call CategoryFilter() from the server but CategoryFilter is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/revdave/Sites/-WebApps/-NEXT-VARIED/ws-12/todo-app-pg/src/components/CategoryFilter.tsx","CategoryFilter")},3023:(e,t,r)=>{"use strict";r.d(t,{PriorityFilter:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call PriorityFilter() from the server but PriorityFilter is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/revdave/Sites/-WebApps/-NEXT-VARIED/ws-12/todo-app-pg/src/components/PriorityFilter.tsx","PriorityFilter")},3355:(e,t,r)=>{"use strict";r.d(t,{SortFilter:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call SortFilter() from the server but SortFilter is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/revdave/Sites/-WebApps/-NEXT-VARIED/ws-12/todo-app-pg/src/components/SortFilter.tsx","SortFilter")},389:(e,t,r)=>{"use strict";r.d(t,{StatusFilter:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call StatusFilter() from the server but StatusFilter is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/revdave/Sites/-WebApps/-NEXT-VARIED/ws-12/todo-app-pg/src/components/StatusFilter.tsx","StatusFilter")},7349:(e,t,r)=>{"use strict";r.d(t,{TodoList:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call TodoList() from the server but TodoList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/revdave/Sites/-WebApps/-NEXT-VARIED/ws-12/todo-app-pg/src/components/TodoList.tsx","TodoList")},1135:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[989,112,987],()=>r(1244));module.exports=s})();